{{ define "main" }}

{{ $.Scratch.Set "title" "" }}

{{ $.Scratch.Set "title" .File.BaseFileName }}

{{ $.Scratch.Add "wordcount" 0 }}
{{ range .Site.RegularPages}}
{{ $.Scratch.Add "wordcount" .WordCount }}
{{ end }}

{{ $title := $.Scratch.Get "title" }}
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="content index" itemprop="articleBody">
        {{ partial "content.html" . }}
    </div>

    <div>
        <p><i class="fa fa-line-chart" aria-hidden="true"></i> pages: {{ len .Site.RegularPages }}, words: {{ $.Scratch.Get "wordcount" | lang.NumFmt 0 }}</p>
    </div>

    <div>
        <h3>lastmod:</h3>
        <ul class="list-reset">
            {{ range ( first 5 ( where .Site.Pages "Type" "garden" ).ByLastmod.Reverse ) }}
                <li>↳ 
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                    <span style="color: #666; font-size:11px;">#{{ index .Params.categories 0 }}</span>
                </li>
            {{ end }}
        </ul>
    </div>
        <!-- <div class="flex flex-wrap content-start mt2 mb3"> -->
        {{ range .Site.Taxonomies.categories }}
        <div class="sm-col sm-col-6 md-col-5 lg-col-4 p1">
            <span class="garden-category"># {{ .Page.Title }}</span>
            <ul class="mt1 mb0 list-reset">
                {{ range . }}
                <li>↳ <a href="{{ .Page.RelPermalink}}">{{ .Page.Title }}</a></li>
                {{ end }}
            </ul>
        </div>
        {{ end }}
    <!-- </div> -->
    </div>
</article>


{{ end }}
